name: üë• Gest√£o de Estudantes
description: Problemas ou solicita√ß√µes relacionadas a estudantes e inscri√ß√µes
title: "[ESTUDANTES] "
labels: ["enhancement", "student-management"]
assignees: []

body:
  - type: markdown
    attributes:
      value: |
        ## üë• Gest√£o de Estudantes
        
        Use este formul√°rio para problemas ou solicita√ß√µes relacionadas ao gerenciamento de estudantes e suas inscri√ß√µes.
        
        **Para o agente Copilot:** Esta √© uma solicita√ß√£o relacionada ao gerenciamento de estudantes no sistema.

  - type: dropdown
    id: request-type
    attributes:
      label: Tipo de Solicita√ß√£o
      description: O que voc√™ precisa fazer relacionado aos estudantes?
      options:
        - Inscrever estudante em atividade espec√≠fica
        - Cancelar inscri√ß√£o de estudante
        - Transferir estudante entre atividades
        - Resolver problema com email duplicado
        - Buscar informa√ß√µes sobre estudante espec√≠fico
        - Resolver problema com capacidade lotada
        - Criar lista de espera para atividade
        - Outro problema com estudantes
    validations:
      required: true

  - type: input
    id: student-email
    attributes:
      label: Email do Estudante
      description: Qual o email do estudante envolvido? (se aplic√°vel)
      placeholder: "Ex: joao.silva@mergington.edu"

  - type: input
    id: activity-name
    attributes:
      label: Nome da Atividade
      description: Qual atividade est√° envolvida? (se aplic√°vel)
      placeholder: "Ex: Chess Club"

  - type: textarea
    id: detailed-request
    attributes:
      label: Descri√ß√£o Detalhada
      description: Explique exatamente o que voc√™ precisa ou o problema que encontrou
      placeholder: |
        Ex: 
        - O estudante jo√£o.silva@mergington.edu quer se inscrever no Chess Club, mas quando clico em inscrever aparece que a atividade est√° lotada. Por√©m, vejo apenas 14 estudantes na lista e a capacidade √© 15.
        - Preciso transferir a estudante maria.santos@mergington.edu do Art Club para o Drama Club porque ela mudou de interesse.
    validations:
      required: true

  - type: dropdown
    id: attempted-solution
    attributes:
      label: O que voc√™ j√° tentou?
      description: Como voc√™ tentou resolver isso?
      options:
        - Tentei inscrever pela interface normal
        - Tentei cancelar e inscrever novamente
        - Verifiquei se o email est√° correto
        - Tentei em hor√°rio diferente
        - Pedi ajuda a outro professor
        - Ainda n√£o tentei nada
        - Outro (especificar abaixo)

  - type: textarea
    id: attempted-details
    attributes:
      label: Detalhes do que foi tentado
      description: Se escolheu "Outro" acima ou quer dar mais detalhes, explique aqui
      placeholder: "Ex: Tentei tr√™s vezes durante a manh√£, mas sempre d√° erro..."

  - type: dropdown
    id: error-received
    attributes:
      label: Mensagem de Erro
      description: Que mensagem de erro voc√™ viu (se houver)?
      options:
        - Atividade lotada
        - Email inv√°lido
        - Estudante j√° inscrito
        - Erro de autentica√ß√£o
        - Nenhuma mensagem, simplesmente n√£o funciona
        - Outra mensagem (especificar abaixo)

  - type: input
    id: other-error
    attributes:
      label: Outra Mensagem de Erro
      description: Se escolheu "Outra mensagem" acima, digite exatamente o que apareceu
      placeholder: "Ex: Erro interno do servidor"

  - type: dropdown
    id: impact-level
    attributes:
      label: Impacto
      description: Como esse problema est√° afetando voc√™ ou os estudantes?
      options:
        - Baixo - estudante pode esperar
        - M√©dio - estudante est√° ansioso para participar
        - Alto - estudante pode perder interesse se demorar
        - Cr√≠tico - impacta outros estudantes ou prazos importantes

  - type: textarea
    id: parent-involvement
    attributes:
      label: Envolvimento dos Pais
      description: Os pais do estudante est√£o cientes ou pressionando por uma solu√ß√£o?
      placeholder: |
        Ex: 
        - Pais perguntaram sobre a inscri√ß√£o
        - Pais reclamaram do problema
        - Estudante est√° pedindo para resolver
        - N√£o h√° press√£o dos pais ainda

  - type: dropdown
    id: preferred-solution
    attributes:
      label: Solu√ß√£o Preferida
      description: Como voc√™ gostaria que isso fosse resolvido?
      options:
        - Inscrever manualmente pelo sistema
        - Aumentar a capacidade da atividade
        - Criar lista de espera
        - Transferir para atividade similar
        - Investigar e corrigir o erro
        - N√£o sei, preciso de orienta√ß√£o

  - type: input
    id: deadline
    attributes:
      label: Prazo
      description: Existe algum prazo para resolver isso?
      placeholder: "Ex: Antes da pr√≥xima aula (quinta-feira)"

  - type: textarea
    id: additional-context
    attributes:
      label: Contexto Adicional
      description: Qualquer outra informa√ß√£o que possa ajudar
      placeholder: |
        Ex: 
        - Esse problema acontece com outros estudantes tamb√©m
        - O estudante tem necessidades especiais
        - √â a primeira vez que tento inscrever algu√©m
        - Problema similar aconteceu semana passada

  - type: markdown
    attributes:
      value: |
        ---
        
        ## üìã Para o Agente de Codifica√ß√£o Copilot
        
        **Crit√©rios de Aceita√ß√£o:**
        - [ ] Investigar estado atual do estudante e atividade no banco de dados
        - [ ] Identificar causa raiz do problema (valida√ß√£o, capacidade, duplicata, etc.)
        - [ ] Implementar corre√ß√£o que resolva o problema espec√≠fico
        - [ ] Validar que estudante fica no estado correto ap√≥s corre√ß√£o
        - [ ] Testar cen√°rios similares para prevenir reincid√™ncia
        - [ ] Verificar se corre√ß√£o n√£o afeta outros estudantes
        
        **Dicas de Investiga√ß√£o:**
        - Verificar collection activities para capacidade real vs participantes
        - Validar formato do email (objeto Email do dom√≠nio)
        - Checar se estudante existe em participants array
        - Testar valida√ß√µes do StudentRegistrationUseCase
        - Verificar logs de erro no backend
        - Confirmar autentica√ß√£o do professor fazendo a solicita√ß√£o
        
        **Poss√≠veis Solu√ß√µes:**
        - Update direto no MongoDB se problema de dados
        - Corre√ß√£o de valida√ß√£o se problema de l√≥gica
        - Ajuste de capacidade se necess√°rio
        - Implementa√ß√£o de lista de espera se solicitado
        - Melhoria na interface para mostrar melhor os erros
        
        **Contexto de Dados:**
        - Estudantes s√£o representados apenas por email (string)
        - Array participants[] em cada Activity
        - Valida√ß√£o de email na classe Email (value object)
        - Capacidade controlada por maxParticipants vs participants.size()
        - Opera√ß√µes via StudentRegistrationUseCase
        
        **Valida√ß√µes Importantes:**
        - Email deve ser v√°lido e √∫nico por atividade
        - Capacidade m√°xima deve ser respeitada
        - Professor deve estar autenticado para fazer inscri√ß√µes
        - Atividade deve existir no sistema
        - Estados de dados devem ficar consistentes