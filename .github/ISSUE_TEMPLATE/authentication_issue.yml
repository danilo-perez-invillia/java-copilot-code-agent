name: üîê Problema de Acesso ou Login
description: Reportar problemas com login, permiss√µes ou autentica√ß√£o
title: "[ACESSO] "
labels: ["bug", "authentication"]
assignees: []

body:
  - type: markdown
    attributes:
      value: |
        ## üîê Problema de Acesso ou Login
        
        Use este formul√°rio para reportar problemas relacionados a login, senhas ou permiss√µes no sistema.
        
        **Para o agente Copilot:** Este √© um problema de autentica√ß√£o/autoriza√ß√£o que precisa ser resolvido.

  - type: dropdown
    id: access-problem-type
    attributes:
      label: Tipo de Problema
      description: Qual tipo de problema voc√™ est√° enfrentando?
      options:
        - N√£o consigo fazer login (senha n√£o funciona)
        - Esqueci minha senha
        - Minha conta foi bloqueada ou desativada
        - Tenho login mas n√£o consigo acessar certas funcionalidades
        - Sistema diz que n√£o tenho permiss√£o para algo que deveria poder fazer
        - Login funciona mas sou desconectado rapidamente
        - Erro ao tentar fazer logout
        - Outro problema de acesso
    validations:
      required: true

  - type: input
    id: username-affected
    attributes:
      label: Nome de Usu√°rio
      description: Qual nome de usu√°rio est√° com problema? (n√£o digite a senha)
      placeholder: "Ex: teacher.silva"
    validations:
      required: true

  - type: dropdown
    id: user-role
    attributes:
      label: Seu Papel no Sistema
      description: Qual √© sua fun√ß√£o?
      options:
        - Professor
        - Administrador
        - N√£o sei/N√£o tenho certeza
    validations:
      required: true

  - type: textarea
    id: detailed-problem
    attributes:
      label: Descri√ß√£o Detalhada do Problema
      description: Explique exatamente o que acontece quando voc√™ tenta acessar o sistema
      placeholder: |
        Ex: 
        - Digito meu usu√°rio e senha na tela de login
        - Clico em "Entrar"
        - A p√°gina fica carregando por alguns segundos
        - Depois aparece a mensagem "Credenciais inv√°lidas"
        - Tenho certeza que a senha est√° correta
    validations:
      required: true

  - type: textarea
    id: error-messages
    attributes:
      label: Mensagens de Erro
      description: Que mensagens de erro voc√™ v√™ na tela?
      placeholder: |
        Ex: 
        - "Credenciais inv√°lidas"
        - "Usu√°rio n√£o encontrado"
        - "Acesso negado"
        - Nenhuma mensagem, apenas n√£o funciona

  - type: dropdown
    id: when-started
    attributes:
      label: Quando o problema come√ßou?
      description: H√° quanto tempo voc√™ tem esse problema?
      options:
        - Hoje
        - Ontem
        - Esta semana
        - Semana passada
        - H√° mais de uma semana
        - Nunca funcionou (conta nova)
        - Funcionava antes mas parou

  - type: textarea
    id: what-changed
    attributes:
      label: O que mudou recentemente?
      description: Aconteceu alguma coisa diferente antes do problema come√ßar?
      placeholder: |
        Ex: 
        - Mudei minha senha
        - Administrador criou minha conta
        - Sistema foi atualizado
        - Mudei de computador/navegador
        - Nada que eu saiba

  - type: dropdown
    id: access-needed-for
    attributes:
      label: Para que voc√™ precisa do acesso?
      description: Que tarefa voc√™ est√° tentando fazer?
      options:
        - Ver lista de atividades
        - Inscrever estudantes em atividades
        - Cancelar inscri√ß√µes de estudantes
        - Gerenciar atividades (criar/modificar)
        - Acessar relat√≥rios ou dados
        - Administrar usu√°rios
        - Outro

  - type: dropdown
    id: urgency-level
    attributes:
      label: Urg√™ncia
      description: Qu√£o urgente √© resolver este problema?
      options:
        - Baixa - posso esperar alguns dias
        - M√©dia - preciso acessar esta semana
        - Alta - preciso acessar hoje
        - Cr√≠tica - est√° impactando estudantes agora

  - type: input
    id: alternative-contact
    attributes:
      label: Contato Alternativo
      description: Email ou telefone para contato urgente (opcional)
      placeholder: "Ex: maria.silva@mergington.edu"

  - type: textarea
    id: temporary-workaround
    attributes:
      label: Solu√ß√£o Tempor√°ria Necess√°ria
      description: Existe algo que pode ser feito temporariamente enquanto o problema n√£o √© resolvido?
      placeholder: |
        Ex: 
        - Outro professor pode fazer as inscri√ß√µes por mim
        - Preciso de uma senha tempor√°ria
        - Posso usar a conta de outro professor
        - Preciso que algu√©m fa√ßa X para mim

  - type: markdown
    attributes:
      value: |
        ---
        
        ## üìã Para o Agente de Codifica√ß√£o Copilot
        
        **Crit√©rios de Aceita√ß√£o:**
        - [ ] Investigar logs de autentica√ß√£o e erro
        - [ ] Verificar se usu√°rio existe no banco de dados (collection teachers)
        - [ ] Validar hash da senha se aplic√°vel
        - [ ] Confirmar roles e permiss√µes do usu√°rio
        - [ ] Testar login com credenciais ap√≥s corre√ß√£o
        - [ ] Verificar se problema afeta outros usu√°rios
        
        **Dicas de Investiga√ß√£o:**
        - Verificar `MongoTeacherRepository` e dados na collection
        - Revisar `AuthenticationUseCase` e valida√ß√£o de credenciais
        - Checar configura√ß√£o de seguran√ßa em `SecurityConfig`
        - Verificar logs do Spring Boot para erros de autentica√ß√£o
        - Testar hash de senha com BouncyCastle Argon2
        - Confirmar vari√°veis de ambiente para senhas padr√£o
        
        **Contexto de Seguran√ßa:**
        - Senhas hasheadas com Argon2 (BouncyCastle)
        - Autentica√ß√£o b√°sica via username/password
        - Valida√ß√£o manual nos use cases, n√£o no Spring Security
        - Collection "teachers" no MongoDB com username como ID
        - Roles: TEACHER, ADMIN (enum Teacher.Role)
        - Senhas padr√£o configur√°veis via env vars
        
        **Poss√≠veis Causas:**
        - Senha n√£o foi hasheada corretamente durante setup
        - Usu√°rio n√£o existe na collection teachers
        - Problema na valida√ß√£o de credenciais
        - Issues de encoding de senha
        - Configura√ß√£o incorreta de CORS/seguran√ßa
        - Problema no frontend com envio de credenciais